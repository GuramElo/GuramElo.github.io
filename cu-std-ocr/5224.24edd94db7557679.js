(self.webpackChunkcu_std_ocr=self.webpackChunkcu_std_ocr||[]).push([[5224],{5224:(H,G,h)=>{h.r(G);var S=h(8782),R=h(7849),s=h(3083);let C=(()=>{class x{constructor(){this.title="cu-std-ocr"}static#e=this.\u0275fac=function(u){return new(u||x)};static#t=this.\u0275cmp=s.\u0275\u0275defineComponent({type:x,selectors:[["app-root"]],standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(u,_){1&u&&s.\u0275\u0275element(0,"router-outlet")},dependencies:[R.RouterModule,R.RouterOutlet]})}return x})();var w=h(467),O=h(1635),T=h(5003),b=h(5592),j=h(877),D=h(4866),g=h(8062),M=h(2118);const L=["videoElement"],Q=["canvasElement"];let W=class ${constructor(){var p=this;this.recognizedText$=(0,s.signal)(""),(0,w.A)(function*(){p.tesseractWorker=yield T.createWorker("eng",T.OEM.DEFAULT,{logger:f=>console.warn(f)})})()}ngAfterViewInit(){this.setupCamera(),(0,D.timer)(3e3,3e3).pipe((0,j.untilDestroyed)(this)).subscribe(()=>{})}setupCamera(){var p=this;return(0,w.A)(function*(){const f=p.videoElement.nativeElement;try{p.stream=yield navigator.mediaDevices.getUserMedia({video:!0}),f.srcObject=p.stream}catch(u){console.error("Error accessing the camera:",u)}})()}stopCamera(){try{const p=this.videoElement.nativeElement;this.stream&&(this.stream.getTracks().forEach(u=>u.stop()),p.srcObject=null)}catch(p){console.error(p)}}captureScreenshot(){var p=this;return(0,w.A)(function*(){try{const f=p.videoElement.nativeElement,u=p.canvasElement.nativeElement,_=u.getContext("2d");u.width=f.videoWidth,u.height=f.videoHeight,_.drawImage(f,0,0,u.width,u.height);const z=b.imread(u);b.cvtColor(z,z,b.COLOR_RGBA2GRAY),b.imshow(u,z),z.delete();const N=u.toDataURL(),U=yield p.recognizeText(N);p.recognizedText$.set(U),console.log("Recognized Text:",U)}catch(f){console.error(f)}})()}recognizeText(p){var f=this;return(0,w.A)(function*(){yield f.tesseractWorker.load();const{data:{text:u}}=yield f.tesseractWorker.recognize(p);return u})()}ngOnDestroy(){try{this.tesseractWorker.terminate(),this.stopCamera()}catch(p){console.log(p)}console.log("midiii")}static#e=this.\u0275fac=function(f){return new(f||$)};static#t=this.\u0275cmp=s.\u0275\u0275defineComponent({type:$,selectors:[["app-camera-ocr"]],viewQuery:function(f,u){if(1&f&&(s.\u0275\u0275viewQuery(L,5),s.\u0275\u0275viewQuery(Q,5)),2&f){let _;s.\u0275\u0275queryRefresh(_=s.\u0275\u0275loadQuery())&&(u.videoElement=_.first),s.\u0275\u0275queryRefresh(_=s.\u0275\u0275loadQuery())&&(u.canvasElement=_.first)}},standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:12,vars:1,consts:[["videoElement",""],["canvasElement",""],[1,"cont-wrapper"],[1,"cont__panel"],["autoplay","","muted","",2,"width","100%","aspect-ratio","640 / 480"],[2,"width","100%","text-align","center"],["nz-button","","nzType","primary",3,"click"],["width","640","height","480",2,"display","none"]],template:function(f,u){if(1&f){const _=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",2)(1,"h2"),s.\u0275\u0275text(2,"\u10e2\u10d4\u10e5\u10e1\u10e2\u10d8\u10e1 \u10d0\u10db\u10dd\u10ea\u10dc\u10dd\u10d1\u10d0"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",3),s.\u0275\u0275element(4,"video",4,0),s.\u0275\u0275elementStart(6,"p",5),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(8,"button",6),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(_),s.\u0275\u0275resetView(u.captureScreenshot())}),s.\u0275\u0275text(9," \u10db\u10dd\u10ed\u10e0\u10d0 "),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(10,"canvas",7,1),s.\u0275\u0275elementEnd()}2&f&&(s.\u0275\u0275advance(7),s.\u0275\u0275textInterpolate(u.recognizedText$()))},dependencies:[g.NzButtonComponent,M.NzTypographyModule],styles:[".cont-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-row-gap:24px}.cont__panel[_ngcontent-%COMP%]{align-items:center;justify-content:flex-start;display:flex;flex-direction:column;grid-row-gap:16px}"]})};W=(0,O.Cg)([(0,j.UntilDestroy)(),(0,O.Sn)("design:paramtypes",[])],W);const V={providers:[(0,R.provideRouter)([{path:"",component:C,children:[{path:"",component:W}]}])]};(0,S.bootstrapApplication)(C,V).catch(x=>console.error(x))},467:(H,G,h)=>{function S(s,C,w,O,T,b,j){try{var D=s[b](j),g=D.value}catch(M){return void w(M)}D.done?C(g):Promise.resolve(g).then(O,T)}function R(s){return function(){var C=this,w=arguments;return new Promise(function(O,T){var b=s.apply(C,w);function j(g){S(b,O,T,j,D,"next",g)}function D(g){S(b,O,T,j,D,"throw",g)}j(void 0)})}}h.d(G,{A:()=>R})},1635:(H,G,h)=>{function w(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function g(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function M(e,t,n,r){return new(n||(n=Promise))(function(o,i){function l(d){try{c(r.next(d))}catch(m){i(m)}}function v(d){try{c(r.throw(d))}catch(m){i(m)}}function c(d){d.done?o(d.value):function a(o){return o instanceof n?o:new n(function(i){i(o)})}(d.value).then(l,v)}c((r=r.apply(e,t||[])).next())})}function u(e){return this instanceof u?(this.v=e,this):new u(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),o=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(y){r[y]&&(a[y]=function(E){return new Promise(function(P,A){o.push([y,E,P,A])>1||l(y,E)})})}function l(y,E){try{!function v(y){y.value instanceof u?Promise.resolve(y.value.v).then(c,d):m(o[0][2],y)}(r[y](E))}catch(P){m(o[0][3],P)}}function c(y){l("next",y)}function d(y){l("throw",y)}function m(y,E){y(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function N(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function B(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(i){return new Promise(function(l,v){!function a(o,i,l,v){Promise.resolve(v).then(function(c){o({value:c,done:l})},i)}(l,v,(i=e[o](i)).done,i.value)})}}}h.d(G,{AQ:()=>_,Cg:()=>w,N3:()=>u,Sn:()=>g,sH:()=>M,xN:()=>N}),"function"==typeof SuppressedError&&SuppressedError}}]);