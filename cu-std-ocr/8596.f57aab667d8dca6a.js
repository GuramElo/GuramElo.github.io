(self.webpackChunkcu_std_ocr=self.webpackChunkcu_std_ocr||[]).push([[8596],{2059:(L,P,u)=>{u.d(P,{Z:()=>v});var h=u(7849),i=u(3083);let v=(()=>{class g{constructor(){this.title="cu-std-ocr"}static#e=this.\u0275fac=function(E){return new(E||g)};static#t=this.\u0275cmp=i.\u0275\u0275defineComponent({type:g,selectors:[["app-root"]],standalone:!0,features:[i.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(E,S){1&E&&i.\u0275\u0275element(0,"router-outlet")},dependencies:[h.RouterModule,h.RouterOutlet]})}return g})()},8596:(L,P,u)=>{u.r(P),u.d(P,{appRoutes:()=>i});var h=u(2059),T=u(1646);const i=[{path:"",component:h.Z,children:[{path:"",component:T.h}]}]},1646:(L,P,u)=>{u.d(P,{h:()=>B});var h=u(467),T=u(1635),i=u(3083),v=u(5003),D=u(5592),E=u(877),O=u(4866),K=u(8062),F=u(2118);const Q=["videoElement"],N=["canvasElement"];let B=class H{constructor(){var l=this;this.recognizedText$=(0,i.signal)(""),(0,h.A)(function*(){l.tesseractWorker=yield v.createWorker("eng",v.OEM.DEFAULT,{logger:_=>console.warn(_)})})()}ngAfterViewInit(){this.setupCamera(),(0,O.timer)(3e3,3e3).pipe((0,E.untilDestroyed)(this)).subscribe(()=>{})}setupCamera(){var l=this;return(0,h.A)(function*(){const _=l.videoElement.nativeElement;try{l.stream=yield navigator.mediaDevices.getUserMedia({video:!0}),_.srcObject=l.stream}catch(d){console.error("Error accessing the camera:",d)}})()}stopCamera(){try{const l=this.videoElement.nativeElement;this.stream&&(this.stream.getTracks().forEach(d=>d.stop()),l.srcObject=null)}catch(l){console.error(l)}}captureScreenshot(){var l=this;return(0,h.A)(function*(){try{const _=l.videoElement.nativeElement,d=l.canvasElement.nativeElement,b=d.getContext("2d");d.width=_.videoWidth,d.height=_.videoHeight,b.drawImage(_,0,0,d.width,d.height);const x=D.imread(d);D.cvtColor(x,x,D.COLOR_RGBA2GRAY),D.imshow(d,x),x.delete();const $=d.toDataURL(),V=yield l.recognizeText($);l.recognizedText$.set(V),console.log("Recognized Text:",V)}catch(_){console.error(_)}})()}recognizeText(l){var _=this;return(0,h.A)(function*(){yield _.tesseractWorker.load();const{data:{text:d}}=yield _.tesseractWorker.recognize(l);return d})()}ngOnDestroy(){try{this.tesseractWorker.terminate(),this.stopCamera()}catch(l){console.log(l)}console.log("midiii")}static#e=this.\u0275fac=function(_){return new(_||H)};static#t=this.\u0275cmp=i.\u0275\u0275defineComponent({type:H,selectors:[["app-camera-ocr"]],viewQuery:function(_,d){if(1&_&&(i.\u0275\u0275viewQuery(Q,5),i.\u0275\u0275viewQuery(N,5)),2&_){let b;i.\u0275\u0275queryRefresh(b=i.\u0275\u0275loadQuery())&&(d.videoElement=b.first),i.\u0275\u0275queryRefresh(b=i.\u0275\u0275loadQuery())&&(d.canvasElement=b.first)}},standalone:!0,features:[i.\u0275\u0275StandaloneFeature],decls:12,vars:1,consts:[["videoElement",""],["canvasElement",""],[1,"cont-wrapper"],[1,"cont__panel"],["autoplay","","muted","",2,"width","100%","aspect-ratio","640 / 480"],[2,"width","100%","text-align","center"],["nz-button","","nzType","primary",3,"click"],["width","640","height","480",2,"display","none"]],template:function(_,d){if(1&_){const b=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2)(1,"h2"),i.\u0275\u0275text(2,"\u10e2\u10d4\u10e5\u10e1\u10e2\u10d8\u10e1 \u10d0\u10db\u10dd\u10ea\u10dc\u10dd\u10d1\u10d0"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275element(4,"video",4,0),i.\u0275\u0275elementStart(6,"p",5),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(8,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(b),i.\u0275\u0275resetView(d.captureScreenshot())}),i.\u0275\u0275text(9," \u10db\u10dd\u10ed\u10e0\u10d0 "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(10,"canvas",7,1),i.\u0275\u0275elementEnd()}2&_&&(i.\u0275\u0275advance(7),i.\u0275\u0275textInterpolate(d.recognizedText$()))},dependencies:[K.NzButtonComponent,F.NzTypographyModule],styles:[".cont-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-row-gap:24px}.cont__panel[_ngcontent-%COMP%]{align-items:center;justify-content:flex-start;display:flex;flex-direction:column;grid-row-gap:16px}"]})};B=(0,T.Cg)([(0,E.UntilDestroy)(),(0,T.Sn)("design:paramtypes",[])],B)},467:(L,P,u)=>{function h(i,R,v,g,D,M,E){try{var S=i[M](E),O=S.value}catch(W){return void v(W)}S.done?R(O):Promise.resolve(O).then(g,D)}function T(i){return function(){var R=this,v=arguments;return new Promise(function(g,D){var M=i.apply(R,v);function E(O){h(M,g,D,E,S,"next",O)}function S(O){h(M,g,D,E,S,"throw",O)}E(void 0)})}}u.d(P,{A:()=>T})},1635:(L,P,u)=>{function v(e,t,r,n){var c,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(c=e[f])&&(o=(a<3?c(o):a>3?c(t,r,o):c(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function O(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function W(e,t,r,n){return new(r||(r=Promise))(function(o,c){function f(p){try{s(n.next(p))}catch(m){c(m)}}function w(p){try{s(n.throw(p))}catch(m){c(m)}}function s(p){p.done?o(p.value):function a(o){return o instanceof r?o:new r(function(c){c(o)})}(p.value).then(f,w)}s((n=n.apply(e,t||[])).next())})}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,n=r.apply(e,t||[]),o=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(y){n[y]&&(a[y]=function(C){return new Promise(function(j,A){o.push([y,C,j,A])>1||f(y,C)})})}function f(y,C){try{!function w(y){y.value instanceof l?Promise.resolve(y.value.v).then(s,p):m(o[0][2],y)}(n[y](C))}catch(j){m(o[0][3],j)}}function s(y){f("next",y)}function p(y){f("throw",y)}function m(y,C){y(C),o.shift(),o.length&&f(o[0][0],o[0][1])}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function G(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(c){return new Promise(function(f,w){!function a(o,c,f,w){Promise.resolve(w).then(function(s){o({value:s,done:f})},c)}(f,w,(c=e[o](c)).done,c.value)})}}}u.d(P,{AQ:()=>_,Cg:()=>v,N3:()=>l,Sn:()=>O,sH:()=>W,xN:()=>b}),"function"==typeof SuppressedError&&SuppressedError}}]);